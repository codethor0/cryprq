// Example build.gradle configuration for release signing
// Add to android/app/build.gradle

android {
    // ... existing config ...

    signingConfigs {
        release {
            def keystorePropertiesFile = rootProject.file("key.properties")
            def keystoreProperties = new Properties()
            if (keystorePropertiesFile.exists()) {
                keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
            } else {
                // Fallback to environment variables (for CI)
                keystoreProperties['storeFile'] = System.getenv("ANDROID_KEYSTORE_PATH") ?: ""
                keystoreProperties['storePassword'] = System.getenv("ANDROID_KEYSTORE_PASSWORD") ?: ""
                keystoreProperties['keyAlias'] = System.getenv("ANDROID_KEY_ALIAS") ?: ""
                keystoreProperties['keyPassword'] = System.getenv("ANDROID_KEY_PASSWORD") ?: ""
            }

            if (keystoreProperties['storeFile']) {
                storeFile file(keystoreProperties['storeFile'])
                storePassword keystoreProperties['storePassword']
                keyAlias keystoreProperties['keyAlias']
                keyPassword keystoreProperties['keyPassword']
            }
        }
    }

    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

